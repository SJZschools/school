<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.tedu.mapper.BbsSingleMapper">

	<!-- 根据评论Id查询详细信息 -->
	<select id="findAllReply" resultMap="replyRM">
		select r.*,u.nickname 
	    from reply r,user_s u
	    where r.user_id = u.id
	</select>
	
	<resultMap type="cn.tedu.pojo.Reply" id="replyRM" autoMapping="true">
		<id column="reply_id" property="replyId"/>
		
		<association property="user" javaType="cn.tedu.pojo.User">
			<id column="user_id" property="id"/>
			<result column="nickname" property="nickname"/>
		</association>
	</resultMap>
	
	<update id="updateBbsRecount">
		update bbs set recount=recount+1 where bss_id = #{bssId}
	</update>
</mapper>